         MACRO
&LABEL   _LLH   &REG,&ADDR
&LABEL   DS     0H
         AIF    ('&SYSOPT_OPTABLE' EQ 'ZOP').OLD
         AIF    ('&SYSOPT_OPTABLE' EQ 'DOS').OLD
         AIF    ('&SYSOPT_OPTABLE' EQ 'ESA').OLD
         AIF    ('&SYSOPT_OPTABLE' EQ '370').OLD
         AIF    ('&SYSOPT_OPTABLE' EQ 'XA').OLD
         LLH    &REG,&ADDR
         AGO    .NEW
.OLD     ANOP
.* EMULATE THE ACTIONS OF LLH. THIS LOADS THE HALFWORD
.* FROM THE ADDRESS INTO BITS 48..63 OF THE 64 BIT
.* REGISTER LEAVING BITS 0..31 UNCHANGED, MOVING '0'B TO
.* BITS 32..47.
.* LOADING THE BITS IS EASY, BUT LEAVING THE CC UNCHANGED
         LH     &REG,&ADDR
         SLL    &REG,16
         SRL    &REG,16
.* LH LOADS BITS 48..63, PROPATING THE HIGH BIT INTO BITS
.* 32..47
.* SLL MOVES BITS 48..63 INTO 32..47, INSERTING ZERO BITS
.* INTO 48..63
.* SRL MOVES BITS 32..47 INTO 48..63, INSERTING ZERO BITS
.* INTO 32..47
.* AND SO WE ARE DONE.
.NEW     ANOP
         MEND
